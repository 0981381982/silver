<html>
  <head>
    <title>Login page</title>
    <link rel="stylesheet" href="styles/inaccessible/styles.css">
    <style>

      body{
        margin:0;
      }


      .modal-backer{
        align-items: center;
        background: hsla(0,0%,40%,.8);
        bottom: 0;
        display:flex;
        left:0;
        justify-content: center;
        position:fixed;
        right:0;
        top:0;
      }

      .dialog{
        align-items: center;
        background: white;
        display:flex;
        flex-wrap:wrap;
        height:200px;
        padding:30px;
        position: relative;
        width:400px;
      }

      .close-dialog{
        color:hsl(0,0%,70%);
        cursor: pointer;
        font-size:30px;
        display:block;
        line-height:0;
        padding:20px;
        position:absolute;
        right:0px;
        top:0px;
      }

      [hidden]{
        display:none !important;
      }

      .btn{
        border: 1px solid hsl(0,0%,60%);
        border-radius: 4px;
        cursor: pointer;
        display: inline-block;
        padding: 0.25em;
        vertical-align: middle;
      }

      .login-form-submit{
        background: hsl(83,73%,36%);
        align-items: center;
        border:0;
        color:hsla(0,0%,100%,.7);
        display:inline-flex;
        grid-column:3 / 4;
        grid-row:4;
      }

      .login-form-disclaimer{
        grid-column: 1 / -1;
        grid-row: 1;
        text-align: center;
      }

      .h1{
        grid-row: 2;
        grid-column: 1 /-1;
        text-align: center;
      }

      .login-form-input-block{
        grid-row: 3;
        grid-column: 3 / 4;
      }

      .login-form-input{
        width:100%
      }

      .button-nested-link{
        background: transparent;
        border:none;
      }

      .page-notes{
        border-top:1px solid hsl(0,0%,70%);
        grid-column: 2 / 5;
        margin-top:1rem;
      }


      .page-notes summary{
        font-weight: bold;
      }


    </style>

  </head>
  <body>
    <div class="modal-backer" hidden>
      <div class="dialog">
        <a class="close-dialog">&times;</a>
        <h1 class="h3">We've emailed your password to you in good-old plain text.</h1>
        <button class="button-nested-link"><a href="login.html">Go to the login page</a></button>
      </div>
    </div>
    <div class="l-login-form-grid">
      <p class="login-form-disclaimer">Note: This page is deliberately inaccessible. The links and submit do not work. It is used for testing. 
    
        <div class="h1">Forgot Password</div>
    
        <div class="login-form-input-block">
          <span class="u-block">Enter your email address</span>
          <input class="login-form-input u-block" type="email">
        </div>
    
        <div class="btn login-form-submit" role="button"><< <img alt="you need to click on this button to make the form work" src="images/login-path/grand-memory-button.png"> >></div>
    </div>

    <section class="l-login-form-grid notes">

      <details class="page-notes">
        <summary>Notes on inaccessibility</summary>
        <div class="content">
          <ol>
            <li>The page doesn't specify a language.</li>
            <li>The page <code class="language-markup">&lt;title&gt;</code> is "Login page".</li>
            <li>The <code class="language-markup">&lt;body&gt;</code> and <code class="language-css">:root</code> element font-size set in <code class="language-css">px</code> to prevent scaling in Chromium browsers.</li>
            <li>The <code class="language-markup">dialog</code> has:
            <ol>
              <li>no focus management to move the user to it when it's open.</li>
              <li>no accessible name or role.</li>
              <li>a close element that isn't keyboard accessible;</li>
              <li>a close element icon that uses the multiplication symbol with no <code class="language-markup">aria-label</code> override.</li>
              <li>a close element icon that has insufficient color contrast.</li>
              <li>a "go to the login page" element that is a link nested inside a button (not a WCAG conformance issue, but a new-ish and frequent HTML violation that seems to have been introduced by one or more SPA frameworks). See <a href="https://adrianroselli.com/2016/12/be-wary-of-nesting-roles.html"><cite>Be Wary Of Nesting Roles</cite></a>.</li>
            </ol>
          </li>  
          <li>Form "label" is a <code class="language-markup">&lt;span&gt;</code> element with no programmatic connection to the <code class="language-markup">&lt;input&gt;</code> element.</li>
          <li>Text input element has no accessible name.</li>
          <li>The form submit element:
            <ol>
              <li>is an image with unsuitable <code class="language-markup">alt</code> text.</li>
              <li>is preceded by two &lt; elements and followed by two &gt; elements, all of which aren't accessibly hidden.</li>
              <li>isn't keyboard accessible.</li>
              <li>has text (in image or "real" formats) without enough contrast.</li>
            </ol>
          </li>
        </ol>
        </div>
      </details>


    </section>

  </body>

  <script>

    document.addEventListener("DOMContentLoaded", function(e){

      const formBtn = document.querySelector(".login-form-submit");
      const modal = document.querySelector(".modal-backer");
      const dialogCloseBtn = document.querySelector(".close-dialog");
      
      formBtn.addEventListener("click", function (e) {
        modal.removeAttribute("hidden");
      }, false);

      dialogCloseBtn.addEventListener("click", function (e) {
        modal.setAttribute("hidden", "");
      }, false);

    });

  </script>

  </html>
